
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Travis CI Security Incident &#8212; the conda-forge blog</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" /> 
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />
 
<link
  rel="alternate"
  type="application/atom+xml"
  href="../../blog/atom.xml"
  title="conda-forge Blog"
/>
 
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
             <div class="section" id="travis-ci-security-incident">
<h1>Travis CI Security Incident<a class="headerlink" href="#travis-ci-security-incident" title="Permalink to this headline">¶</a></h1>
<p>On September 9, 2021 one of our core devs discovered that artifacts building on
Travis CI were being uploaded to our conda channel from PRs running on forked
repositories. A quick investigation revealed that Travis CI was passing encrypted
secrets to PR builds on forks. Further examination of our logs and artifacts indicated
that this had been happening since about September 3, 2021. This security bug was subsequently confirmed by Travis CI. See this <a class="reference external" href="https://nvd.nist.gov/vuln/detail/CVE-2021-41077">CVE</a>
for more details on this incident. <strong>As far as we know, there were no actual exploits against
conda-forge which used this vulnerability.</strong></p>
<div class="section" id="our-response">
<h2>Our Response<a class="headerlink" href="#our-response" title="Permalink to this headline">¶</a></h2>
<p>We took the following steps to respond to this incident.</p>
<ol class="arabic simple">
<li><p>We immediately turned off all builds on Travis CI by suspending the Travis CI GitHub App.</p></li>
<li><p>We immediately disclosed the bug to Travis CI through our contacts there.</p></li>
<li><p>Once Travis CI indicated to us that they were ready, we rotated
all feedstock tokens and later our anaconda.org token for our staging channel. The anaconda.org token
for the main <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> channel was never disclosed in this incident. Further, only ~70 feedstocks
had their tokens exposed in this incident.</p></li>
<li><p>We examined our artifacts and marked as broken any artifacts that were uploaded from PRs. We think we found
everything, but we are not completely sure. Our criterion for marking things broken was more generous than it needed to be.</p></li>
<li><p>We issued PRs to rebuild any broken artifacts via our bots.</p></li>
<li><p>We put in changes to <code class="docutils literal notranslate"><span class="pre">conda-smithy</span></code> to help prevent inadvertent uploads of artifacts from PRs in the future.</p></li>
</ol>
</div>
<div class="section" id="closing-thoughts-what-can-you-do">
<h2>Closing Thoughts &amp; What can you do?<a class="headerlink" href="#closing-thoughts-what-can-you-do" title="Permalink to this headline">¶</a></h2>
<p>I (MRB) want to recognize the quick work of our core dev team in handling this incident. It goes without saying
that the public nature of <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code>’s infrastructure carries risks. On the other hand, by being public,
anyone can look and verify our artifact builds. Security for <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> is about reducing risk and we will
continue to do our best.</p>
<p>Our best defense against security incidents in <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> is <em>you</em>! Our feedstock maintainers
are in the best position to notice incidents and issues. Please responsibly report anything you find to us
at <code class="docutils literal notranslate"><span class="pre">condaforge+security&#64;gmail.com</span></code>.</p>
</div>
</div>

<div class="section">
    

<div class="section">
  <span style="float: left">
     
    <a href="../2021-06-16-graykull-step-by-step/">
      <i class="fa fa-arrow-circle-left"></i> Contributing Packages To conda-forge Using Grayskull
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     
    <a href="../2021-11-03-tensorflow-gpu/">
      GPU enabled TensorFlow builds on conda-forge <i
        class="fa fa-arrow-circle-right"
      ></i
      >
    </a>
    
  </span>
</div>
  
</div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../">
              <img class="logo" src="../../_static/logo_black_on_trans.png" alt="Logo"/>
            </a></p><p>
the conda-forge blog
</p>  
<h2>
   <i class="fa fa-calendar"></i>
  2021-09-24 
</h2>

<ul>
   
<li id="author">
  <span
    ><i class="fa-fw fa fa-user"></i></span
  >
   
  <a href="../../blog/author/matthew-r-becker/">Matthew R. Becker</a>  
</li>
    
<li id="tags">
  <span
    ><i
      class="fa-fw fa fa-tag"
    ></i
    ></span
  >
   
  <a href="../../blog/tag/security/">security</a>  
</li>
 
</ul>

<h3>
  <a href="../../blog/">Recent Posts</a>
</h3>
<ul>
   
  <li>
    <a href="../2022-08-19-outreachy-wrap-up-blog-2022/"
      >2022-08-26 - Outreachy 2022 Wrap-up Blog</a
    >
  </li>
  
  <li>
    <a href="../2021-11-03-tensorflow-gpu/"
      >2021-11-03 - GPU enabled TensorFlow builds on conda-forge</a
    >
  </li>
  
  <li>
    <a href="../2021-06-16-graykull-step-by-step/"
      >2021-06-16 - Contributing Packages To conda-forge Using Grayskull</a
    >
  </li>
  
  <li>
    <a href="../2021-02-02-Outreachy/"
      >2021-02-02 - Conda-forge Outreachy</a
    >
  </li>
  
  <li>
    <a href="../2020-12-26-year-in-review/"
      >2020-12-26 - 2020 in Review</a
    >
  </li>
  
</ul>

<h3><a href="../../blog/tag/">Tags</a></h3>
<style type="text/css">
  ul.ablog-cloud {
    list-style: none;
    overflow: auto;
  }
  ul.ablog-cloud li {
    float: left;
    height: 20pt;
    line-height: 18pt;
    margin-right: 5px;
  }
  ul.ablog-cloud a {
    text-decoration: none;
    vertical-align: middle;
  }
  li.ablog-cloud-1 {
    font-size: 80%;
  }
  li.ablog-cloud-2 {
    font-size: 95%;
  }
  li.ablog-cloud-3 {
    font-size: 110%;
  }
  li.ablog-cloud-4 {
    font-size: 125%;
  }
  li.ablog-cloud-5 {
    font-size: 140%;
  }
</style>
<ul class="ablog-cloud">
   
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../blog/tag/grayskull/">Grayskull</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../blog/tag/outreachy/">Outreachy</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../blog/tag/autotick-bot/">autotick-bot</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../blog/tag/conda/">conda</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-5">
    <a href="../../blog/tag/conda-forge/">conda-forge</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../blog/tag/infrastructure/">infrastructure</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../blog/tag/scipy/">scipy</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../blog/tag/security/">security</a>
  </li>
   
</ul>

<h3>
  <a href="../../blog/archive/">Archives</a>
</h3>
<ul>
   
  <li>
    <a href="../../blog/2022/">2022 (1)</a>
  </li>
    
  <li>
    <a href="../../blog/2021/">2021 (4)</a>
  </li>
    
  <li>
    <a href="../../blog/2020/">2020 (10)</a>
  </li>
    
  <li>
    <a href="../../blog/2019/">2019 (1)</a>
  </li>
   
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016-2022, conda-forge.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/posts/2021-09-24-travis-security.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>